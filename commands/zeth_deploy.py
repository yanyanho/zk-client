# Copyright (c) 2015-2020 Clearmatics Technologies Ltd
#
# SPDX-License-Identifier: LGPL-3.0+
'''
from commands.utils import \
    open_web3_from_ctx, get_erc20_instance_description, load_eth_address, \
    write_mixer_description, MixerDescription
from zeth.mixer_client import MixerClient
from zeth.utils import EtherValue
'''
import json
import ast
from click import Context, command, option, pass_context
from typing import Optional
import sys
sys.path.append('../')
from python_web3.eth_utils import to_checksum_address
from python_web3.client.bcosclient import BcosClient
from contract.Groth16Mixer import Groth16Mixer
from zeth.prover_client import ProverClient
from zeth.mixer_client import write_verification_key
from zeth.zksnark import get_zksnark_provider
from commands.constants import PROVER_SERVER_ENDPOINT_DEFAULT


def deploy(
        token_address: Optional[str]
        ) :
    """
    Deploy the zeth contracts and record the instantiation details.
    """
    zksnark = get_zksnark_provider("GROTH16")
    prover_client = ProverClient(PROVER_SERVER_ENDPOINT_DEFAULT)
    vk_obj = prover_client.get_verification_key()
    vk_json = zksnark.parse_verification_key(vk_obj)
    #print("VK.json: ", vk_json)

    print("Received VK, writing verification key...")
    write_verification_key(vk_json)
    verification_key_params = zksnark.verification_key_parameters(vk_json)
    constructArgs = [5, to_checksum_address(token_address), verification_key_params['Alpha'], verification_key_params['Beta1'], verification_key_params['Beta2'], verification_key_params['Delta1'], verification_key_params['Delta2'], verification_key_params['ABC_coords']]

    si = Groth16Mixer("")
    '''
    fo = open("./contract/mixer/abi/Groth16Mixer.abi")
    abistring = fo.read()
    abi = json.loads(abistring)
    fo.close()
    f1 = open("./contract/mixer/abi/Groth16Mixer.bin")
    bin = f1.read()
    f1.close()
    '''
    abi = [{"inputs": [{"internalType": "uint256", "name": "mk_depth", "type": "uint256"}, {"internalType": "address", "name": "token", "type": "address"}, {"internalType": "uint256[2]", "name": "Alpha", "type": "uint256[2]"}, {"internalType": "uint256[2]", "name": "Beta1", "type": "uint256[2]"}, {"internalType": "uint256[2]", "name": "Beta2", "type": "uint256[2]"}, {"internalType": "uint256[2]", "name": "Delta1", "type": "uint256[2]"}, {"internalType": "uint256[2]", "name": "Delta2", "type": "uint256[2]"}, {"internalType": "uint256[]", "name": "ABC_coords", "type": "uint256[]"}], "payable": False, "stateMutability": "nonpayable", "type": "constructor"}, {"anonymous": False, "inputs": [{"indexed": False, "internalType": "string", "name": "message", "type": "string"}], "name": "LogDebug", "type": "event"}, {"anonymous": False, "inputs": [{"indexed": False, "internalType": "bytes32", "name": "message", "type": "bytes32"}], "name": "LogDebug", "type": "event"}, {"anonymous": False, "inputs": [{"indexed": False, "internalType": "bytes32", "name": "root", "type": "bytes32"}, {"indexed": False, "internalType": "bytes32[2]", "name": "nullifiers", "type": "bytes32[2]"}, {"indexed": False, "internalType": "bytes32[2]", "name": "commitments", "type": "bytes32[2]"}, {"indexed": False, "internalType": "bytes[2]", "name": "ciphertexts", "type": "bytes[2]"}], "name": "LogMix", "type": "event"}, {"constant": True, "inputs": [{"internalType": "uint256[9]", "name": "primary_inputs", "type": "uint256[9]"}], "name": "assemble_hsig", "outputs": [{"internalType": "bytes32", "name": "hsig", "type": "bytes32"}], "payable": False, "stateMutability": "pure", "type": "function"}, {"constant": True, "inputs": [{"internalType": "uint256", "name": "index", "type": "uint256"}, {"internalType": "uint256[9]", "name": "primary_inputs", "type": "uint256[9]"}], "name": "assemble_nullifier", "outputs": [{"internalType": "bytes32", "name": "nf", "type": "bytes32"}], "payable": False, "stateMutability": "pure", "type": "function"}, {"constant": True, "inputs": [{"internalType": "uint256[9]", "name": "primary_inputs", "type": "uint256[9]"}], "name": "assemble_public_values", "outputs": [{"internalType": "uint256", "name": "vpub_in", "type": "uint256"}, {"internalType": "uint256", "name": "vpub_out", "type": "uint256"}], "payable": False, "stateMutability": "pure", "type": "function"}, {"constant": True, "inputs": [], "name": "get_constants", "outputs": [{"internalType": "uint256", "name": "js_in", "type": "uint256"}, {"internalType": "uint256", "name": "js_out", "type": "uint256"}, {"internalType": "uint256", "name": "num_inputs", "type": "uint256"}], "payable": False, "stateMutability": "pure", "type": "function"}, {"constant": False, "inputs": [{"internalType": "bytes32", "name": "commitment", "type": "bytes32"}], "name": "insert", "outputs": [], "payable": False, "stateMutability": "nonpayable", "type": "function"}, {"constant": False, "inputs": [{"internalType": "uint256[2]", "name": "a", "type": "uint256[2]"}, {"internalType": "uint256[4]", "name": "b", "type": "uint256[4]"}, {"internalType": "uint256[2]", "name": "c", "type": "uint256[2]"}, {"internalType": "uint256[4]", "name": "vk", "type": "uint256[4]"}, {"internalType": "uint256", "name": "sigma", "type": "uint256"}, {"internalType": "uint256[9]", "name": "input", "type": "uint256[9]"}, {"internalType": "bytes[2]", "name": "ciphertexts", "type": "bytes[2]"}], "name": "mix", "outputs": [], "payable": True, "stateMutability": "payable", "type": "function"}, {"constant": False, "inputs": [{"internalType": "address", "name": "", "type": "address"}, {"internalType": "address", "name": "", "type": "address"}, {"internalType": "uint256", "name": "", "type": "uint256"}, {"internalType": "bytes", "name": "", "type": "bytes"}], "name": "onBAC001Received", "outputs": [{"internalType": "bytes4", "name": "", "type": "bytes4"}], "payable": False, "stateMutability": "nonpayable", "type": "function"}, {"constant": True, "inputs": [], "name": "token", "outputs": [{"internalType": "address", "name": "", "type": "address"}], "payable": False, "stateMutability": "view", "type": "function"}]
    binstr = "60806040523480156200001157600080fd5b506040516200364e3803806200364e833981810160405262000037919081019062000685565b878781806005811462000081576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016200007890620008ba565b60405180910390fd5b50620000926200040360201b60201c565b506000806000603f8110620000a357fe5b0154905060016040600083815260200190815260200160002060006101000a81548160ff02191690831515021790555081604260006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff16021790555061010060fd106200015c576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401620001539062000876565b60405180910390fd5b60fd6002800260010160fd610100030260406002020110620001b5576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401620001ac9062000898565b60405180910390fd5b505050604051806040016040528087600060028110620001d157fe5b6020020151815260200187600160028110620001e957fe5b6020020151815250604360000160008201518160000155602082015181600101559050506040518060800160405280866000600281106200022657fe5b60200201518152602001866001600281106200023e57fe5b60200201518152602001856000600281106200025657fe5b60200201518152602001856001600281106200026e57fe5b6020020151815250604360020160008201518160000155602082015181600101556040820151816002015560608201518160030155905050604051806080016040528084600060028110620002bf57fe5b6020020151815260200184600160028110620002d757fe5b6020020151815260200183600060028110620002ef57fe5b60200201518152602001836001600281106200030757fe5b602002015181525060436006016000820151816000015560208201518160010155604082015181600201556060820151816003015590505060008090505b60028251816200035157fe5b046043600a018054905014620003f4576043600a0160405180604001604052808484815181106200037e57fe5b602002602001015181526020018460018501815181106200039b57fe5b602002602001015181525090806001815401808255809150509060018203906000526020600020906002020160009091929091909150600082015181600001556020820151816001015550505060028101905062000345565b505050505050505050620009d9565b60008060001b90508060006002600560020a60020203603f81106200042457fe5b018190555060006002600560020a816200043a57fe5b0490505b600081111562000495576200045f82836200049960201b620014e31760201c565b9150600060028260020203905082600082603f81106200047b57fe5b0181905550600282816200048b57fe5b049150506200043e565b5050565b60007fdec937b7fa8db3de380427a8cc947bfab68514522c3439cfa2e99655098368146000527f30644e72e131a029b85045b68181585d2833e84879b9709143e1f593f00000018284828282088381820984858383098683840909925060005b605a8112156200053457602060002080600052868688838808089350868485099250868488858a8788090909945050600181019050620004f9565b508484868a8888880808089550505050505092915050565b6000815190506200055d81620009a5565b92915050565b600082601f8301126200057557600080fd5b60026200058c62000586826200090a565b620008dc565b91508183856020840282011115620005a357600080fd5b60005b83811015620005d75781620005bc88826200066e565b845260208401935060208301925050600181019050620005a6565b5050505092915050565b600082601f830112620005f357600080fd5b81516200060a62000604826200092d565b620008dc565b915081818352602084019350602081019050838560208402820111156200063057600080fd5b60005b838110156200066457816200064988826200066e565b84526020840193506020830192505060018101905062000633565b5050505092915050565b6000815190506200067f81620009bf565b92915050565b6000806000806000806000806101a0898b031215620006a357600080fd5b6000620006b38b828c016200066e565b9850506020620006c68b828c016200054c565b9750506040620006d98b828c0162000563565b9650506080620006ec8b828c0162000563565b95505060c0620006ff8b828c0162000563565b945050610100620007138b828c0162000563565b935050610140620007278b828c0162000563565b92505061018089015167ffffffffffffffff8111156200074657600080fd5b620007548b828c01620005e1565b9150509295985092959890939650565b600062000773602d8362000956565b91507f41206861736820646967657374206669747320696e20612073696e676c65206660008301527f69656c6420656c656d656e742e000000000000000000000000000000000000006020830152604082019050919050565b6000620007db602b8362000956565b91507f546f6f206d616e7920696e70757420616e64206f7574707574206e6f7465732060008301527f636f6e736964657265642e0000000000000000000000000000000000000000006020830152604082019050919050565b600062000843601f8362000956565b91507f496e76616c696420646570746820696e20426173654d65726b6c6554726565006000830152602082019050919050565b60006020820190508181036000830152620008918162000764565b9050919050565b60006020820190508181036000830152620008b381620007cc565b9050919050565b60006020820190508181036000830152620008d58162000834565b9050919050565b6000604051905081810181811067ffffffffffffffff821117156200090057600080fd5b8060405250919050565b600067ffffffffffffffff8211156200092257600080fd5b602082029050919050565b600067ffffffffffffffff8211156200094557600080fd5b602082029050602081019050919050565b600082825260208201905092915050565b600062000974826200097b565b9050919050565b600073ffffffffffffffffffffffffffffffffffffffff82169050919050565b6000819050919050565b620009b08162000967565b8114620009bc57600080fd5b50565b620009ca816200099b565b8114620009d657600080fd5b50565b612c6580620009e96000396000f3fe60806040526004361061007b5760003560e01c806397e004891161004e57806397e0048914610161578063c73d16ae1461017d578063f9eb943f146101ba578063fc0c546a146101e75761007b565b806305ceb93c146100805780631f40927c146100bd5780632d287e43146100fb578063354d06fd14610124575b600080fd5b34801561008c57600080fd5b506100a760048036036100a29190810190611aaf565b610212565b6040516100b491906125c9565b60405180910390f35b3480156100c957600080fd5b506100e460048036036100df9190810190611a33565b610332565b6040516100f292919061282b565b60405180910390f35b34801561010757600080fd5b50610122600480360361011d9190810190611a5d565b6103af565b005b34801561013057600080fd5b5061014b60048036036101469190810190611a33565b610434565b60405161015891906125c9565b60405180910390f35b61017b60048036036101769190810190611978565b6104b2565b005b34801561018957600080fd5b506101a4600480360361019f91908101906118fd565b6106d4565b6040516101b19190612630565b60405180910390f35b3480156101c657600080fd5b506101cf6106e8565b6040516101de93929190612854565b60405180910390f35b3480156101f357600080fd5b506101fc61070c565b6040516102099190612528565b60405180910390f35b600060028310610257576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161024e9061264b565b60405180910390fd5b600060fd610100038460010102604060020201905060fd61010003810160fd10156102b7576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016102ae906126eb565b60405180910390fd5b600060fd826002800260010160fd610100030260406002020161010003018560028002600101600260010101600981106102ed57fe5b602002015160001b901b901c9050600060fd6101000385876002600101016009811061031557fe5b6020020151901b90508160001c810160001b935050505092915050565b600080600083600280026001016002600101016009811061034f57fe5b602002015190506002800260010160fd610100030281901c905064e8d4a5100067ffffffffffffffff168167ffffffffffffffff1602915064e8d4a5100067ffffffffffffffff16604082901c67ffffffffffffffff1602925050915091565b600560020a603f54106103f7576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016103ee906126cb565b60405180910390fd5b6000603f549050603f60008154600101919050819055506000816001600560020a0301905082600082603f811061042a57fe5b0181905550505050565b60008060fd60406002026002800260010160fd6101000302604060020201610100030184600280026001016002600101016009811061046f57fe5b602002015160001b901b901c9050600060fd6101000384600280600101016009811061049757fe5b6020020151901b90508160001c810160001b92505050919050565b6104ba611594565b6104c5858483610732565b600060023373ffffffffffffffffffffffffffffffffffffffff16846000600281106104ed57fe5b6020020151856001600281106104ff57fe5b60200201518c8c8c8a60405160200161051e97969594939291906124ae565b60405160208183030381529060405260405161053a9190612482565b602060405180830381855afa158015610557573d6000803e3d6000fd5b5050506040513d601f19601f8201168201806040525061057a9190810190611a86565b90506105ce8660006004811061058c57fe5b60200201518760016004811061059e57fe5b6020020151886002600481106105b057fe5b6020020151896003600481106105c257fe5b60200201518986610940565b61060d576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610604906127cb565b60405180910390fd5b61061989898987610a17565b610658576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161064f9061276b565b60405180910390fd5b610660611594565b61066a8582610c20565b60006106766002610c7c565b905061068181610cde565b7f36ed7c3f2ecfb5a5226c478b034d33144c060afe361be291e948f861dcddc618818584886040516106b694939291906125e4565b60405180910390a16106c786610d0d565b5050505050505050505050565b600063c73d16ae60e01b9050949350505050565b60008060006002925060029150600160028002600101600260010101019050909192565b604260009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1681565b604060008360006009811061074357fe5b602002015160001b815260200190815260200160002060009054906101000a900460ff166107a6576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161079d9061270b565b60405180910390fd5b60008090505b60028110156108745760006107c18285610212565b90506041600082815260200190815260200160002060009054906101000a900460ff1615610824576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161081b9061266b565b60405180910390fd5b60016041600083815260200190815260200160002060006101000a81548160ff0219169083151502179055508083836002811061085d57fe5b6020020181815250505080806001019150506107ac565b5060006002828560405160200161088c929190612456565b6040516020818303038152906040526040516108a89190612482565b602060405180830381855afa1580156108c5573d6000803e3d6000fd5b5050506040513d601f19601f820116820180604052506108e89190810190611a86565b905060006108f584610434565b9050808214610939576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016109309061272b565b60405180910390fd5b5050505050565b600061094a6115b6565b6107d05a038682528560208301528360408301526020608083016060846000600286f150604082018981528860208201526040816060836000600787f1506040836080856000600687f15060016040840152600260608401528560808401526040816060836000600787f1505050806002600581106109c557fe5b6020020151816000600581106109d757fe5b6020020151148015610a0a5750806003600581106109f157fe5b602002015181600160058110610a0357fe5b6020020151145b9150509695505050505050565b6000807f30644e72e131a029b85045b68181585d2833e84879b9709143e1f593f00000019050610a456115d8565b86600060028110610a5257fe5b602002015181600001818152505086600160028110610a6d57fe5b602002015181602001818152505085600060048110610a8857fe5b602002015181604001818152505085600160048110610aa357fe5b602002015181606001818152505085600260048110610abe57fe5b602002015181608001818152505085600360048110610ad957fe5b60200201518160a001818152505084600060028110610af457fe5b60200201518160c001818152505084600160028110610b0f57fe5b60200201518160e0018181525050606060016002800260010160026001010101604051908082528060200260200182016040528015610b5d5781602001602082028038833980820191505090505b50905060008090505b60016002800260010160026001010101811015610c055783868260098110610b8a57fe5b602002015110610bcf576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610bc6906127ab565b60405180910390fd5b858160098110610bdb57fe5b6020020151828281518110610bec57fe5b6020026020010181815250508080600101915050610b66565b50610c1081836110c5565b6001149350505050949350505050565b60008090505b6002811015610c77576000838260010160098110610c4057fe5b602002015160001b905080838360028110610c5757fe5b602002018181525050610c69816103af565b508080600101915050610c26565b505050565b600080603f549050600083603f540390506000600560020a90505b6001811115610cc557610cab8183856113e2565b809450819350505060028181610cbd57fe5b049050610c97565b600080603f8110610cd257fe5b01549350505050919050565b60016040600083815260200190815260200160002060006101000a81548160ff02191690831515021790555050565b600080610d1983610332565b915091506000821115610e6057600073ffffffffffffffffffffffffffffffffffffffff16604260009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1614610e18576000604260009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1690508073ffffffffffffffffffffffffffffffffffffffff1663d0e7d6113330866040518463ffffffff1660e01b8152600401610de093929190612543565b600060405180830381600087803b158015610dfa57600080fd5b505af1158015610e0e573d6000803e3d6000fd5b5050505050610e5b565b813414610e5a576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610e519061278b565b60405180910390fd5b5b610f18565b6000341115610f175760003373ffffffffffffffffffffffffffffffffffffffff1634604051610e8f90612499565b60006040518083038185875af1925050503d8060008114610ecc576040519150601f19603f3d011682016040523d82523d6000602084013e610ed1565b606091505b5050905080610f15576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610f0c9061268b565b60405180910390fd5b505b5b60008111156110c057600073ffffffffffffffffffffffffffffffffffffffff16604260009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1614611011576000604260009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1690508073ffffffffffffffffffffffffffffffffffffffff16639bd9bbc633846040518363ffffffff1660e01b8152600401610fd992919061258d565b600060405180830381600087803b158015610ff357600080fd5b505af1158015611007573d6000803e3d6000fd5b50505050506110bf565b60003373ffffffffffffffffffffffffffffffffffffffff168260405161103790612499565b60006040518083038185875af1925050503d8060008114611074576040519150601f19603f3d011682016040523d82523d6000602084013e611079565b606091505b50509050806110bd576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016110b4906126ab565b60405180910390fd5b505b5b505050565b60006043600a0180549050600184510114611115576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161110c9061274b565b60405180910390fd5b61111d61161d565b6000600190506107d05a03600a60430183526020832060208701875160200281018254865260018301546020870152600283019250604086015b818310156111a657835481526001840154602082015282516040820152604081606083600060078af160408860808a600060068bf1808216881697505050600284019350602083019250611157565b5050505050806111eb576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016111e29061280b565b60405180910390fd5b7f198e9393920d483a7260bfb731fb5d25f1aa493335a9e71297e485b7aef312c260408301527f1800deef121f1e76426a00665e5c4479674322d4f75edadd46debd5cd992f6ed60608301527f090689d0585ff075ec9e99ad690c3395bc4b313370b38ef355acdadcd122975b60808301527f12c85ea5db8c6deb4aab71808dcb408fe3d1e7690c43d37b4ce6cc0166fa7daa60a083015260435460c083015260016043015460e083015260026043015461010083015260036043015461012083015260046043015461014083015260056043015461016083015283516101808301527f30644e72e131a029b85045b68181585d97816a916871ca8d3c208c16d87cfd47602085015181810682036101a085015260408601516101c085015260608601516101e0850152608086015161020085015260a086015161022085015260c086015161024085015260e08601516102608501526006604301546102808501526007604301546102a08501526008604301546102c08501526009604301546102e085015260208461030086600060086107d05a03f192505050806113c6576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016113bd906127eb565b60405180910390fd5b816000601881106113d357fe5b60200201519250505092915050565b600080600060018603905060006001198616820190506000806001871614611459576001868401039050611435600082603f811061141c57fe5b0154600085600202603f811061142e57fe5b01546114e3565b60006002600184038161144457fe5b04603f811061144f57fe5b018190555061145f565b85830190505b5b818111156114bb57600281039050611497600082603f811061147e57fe5b0154600060018401603f811061149057fe5b01546114e3565b6000600260018403816114a657fe5b04603f81106114b157fe5b0181905550611460565b600287816114c557fe5b04600260018801816114d357fe5b0494509450505050935093915050565b60007fdec937b7fa8db3de380427a8cc947bfab68514522c3439cfa2e99655098368146000527f30644e72e131a029b85045b68181585d2833e84879b9709143e1f593f00000018284828282088381820984858383098683840909925060005b605a81121561157c57602060002080600052868688838808089350868485099250868488858a8788090909945050600181019050611543565b508484868a8888880808089550505050505092915050565b6040518060400160405280600290602082028038833980820191505090505090565b6040518060a00160405280600590602082028038833980820191505090505090565b60405180610100016040528060008152602001600081526020016000815260200160008152602001600081526020016000815260200160008152602001600081525090565b604051806103000160405280601890602082028038833980820191505090505090565b60008135905061164f81612bdd565b92915050565b600082601f83011261166657600080fd5b6002611679611674826128b8565b61288b565b9150818360005b838110156116b057813586016116968882611840565b845260208401935060208301925050600181019050611680565b5050505092915050565b600082601f8301126116cb57600080fd5b60026116de6116d9826128da565b61288b565b915081838560208402820111156116f457600080fd5b60005b83811015611724578161170a88826118e8565b8452602084019350602083019250506001810190506116f7565b5050505092915050565b600082601f83011261173f57600080fd5b600461175261174d826128fc565b61288b565b9150818385602084028201111561176857600080fd5b60005b83811015611798578161177e88826118e8565b84526020840193506020830192505060018101905061176b565b5050505092915050565b600082601f8301126117b357600080fd5b60096117c66117c18261291e565b61288b565b915081838560208402820111156117dc57600080fd5b60005b8381101561180c57816117f288826118e8565b8452602084019350602083019250506001810190506117df565b5050505092915050565b60008135905061182581612bf4565b92915050565b60008151905061183a81612bf4565b92915050565b600082601f83011261185157600080fd5b813561186461185f82612940565b61288b565b9150808252602083016020830185838301111561188057600080fd5b61188b838284612b80565b50505092915050565b600082601f8301126118a557600080fd5b81356118b86118b38261296c565b61288b565b915080825260208301602083018583830111156118d457600080fd5b6118df838284612b80565b50505092915050565b6000813590506118f781612c0b565b92915050565b6000806000806080858703121561191357600080fd5b600061192187828801611640565b945050602061193287828801611640565b9350506040611943878288016118e8565b925050606085013567ffffffffffffffff81111561196057600080fd5b61196c87828801611894565b91505092959194509250565b60008060008060008060006102e0888a03121561199457600080fd5b60006119a28a828b016116ba565b97505060406119b38a828b0161172e565b96505060c06119c48a828b016116ba565b9550506101006119d68a828b0161172e565b9450506101806119e88a828b016118e8565b9350506101a06119fa8a828b016117a2565b9250506102c088013567ffffffffffffffff811115611a1857600080fd5b611a248a828b01611655565b91505092959891949750929550565b60006101208284031215611a4657600080fd5b6000611a54848285016117a2565b91505092915050565b600060208284031215611a6f57600080fd5b6000611a7d84828501611816565b91505092915050565b600060208284031215611a9857600080fd5b6000611aa68482850161182b565b91505092915050565b6000806101408385031215611ac357600080fd5b6000611ad1858286016118e8565b9250506020611ae2858286016117a2565b9150509250929050565b6000611af88383611d8e565b60208301905092915050565b6000611b108383611dac565b60208301905092915050565b6000611b288383611dfb565b905092915050565b6000611b3c8383612430565b60208301905092915050565b611b5181612b4a565b82525050565b611b6081612ad8565b82525050565b611b6f816129ca565b611b798184612a58565b9250611b8482612998565b8060005b83811015611bb5578151611b9c8782611aec565b9650611ba783612a17565b925050600181019050611b88565b505050505050565b611bc6816129ca565b611bd08184612a63565b9250611bdb82612998565b8060005b83811015611c0c578151611bf38782611b04565b9650611bfe83612a17565b925050600181019050611bdf565b505050505050565b6000611c1f826129d5565b611c298185612a6e565b935083602082028501611c3b856129a2565b8060005b85811015611c775784840389528151611c588582611b1c565b9450611c6383612a24565b925060208a01995050600181019050611c3f565b50829750879550505050505092915050565b611c92816129e0565b611c9c8184612a79565b9250611ca7826129ac565b8060005b83811015611cd8578151611cbf8782611b30565b9650611cca83612a31565b925050600181019050611cab565b505050505050565b611ce9816129eb565b611cf38184612a84565b9250611cfe826129b6565b8060005b83811015611d2f578151611d168782611b30565b9650611d2183612a3e565b925050600181019050611d02565b505050505050565b611d40816129f6565b611d4a8184612a8f565b9250611d55826129c0565b8060005b83811015611d86578151611d6d8782611b30565b9650611d7883612a4b565b925050600181019050611d59565b505050505050565b611d9781612aea565b82525050565b611da681612aea565b82525050565b611db581612aea565b82525050565b611dc481612af4565b82525050565b6000611dd582612a0c565b611ddf8185612abc565b9350611def818560208601612b8f565b80840191505092915050565b6000611e0682612a01565b611e108185612a9a565b9350611e20818560208601612b8f565b611e2981612bcc565b840191505092915050565b6000611e3f82612a01565b611e498185612abc565b9350611e59818560208601612b8f565b80840191505092915050565b6000611e72601883612ac7565b91507f6e756c6c696669657220696e646578206f766572666c6f7700000000000000006000830152602082019050919050565b6000611eb2603783612ac7565b91507f496e76616c6964206e756c6c69666965723a2054686973206e756c6c6966696560008301527f722068617320616c7265616479206265656e20757365640000000000000000006020830152604082019050919050565b6000611f18601e83612ac7565b91507f767075625f696e2072657475726e207472616e73666572206661696c656400006000830152602082019050919050565b6000611f58601883612ac7565b91507f767075625f6f7574207472616e73666572206661696c656400000000000000006000830152602082019050919050565b6000611f98602783612ac7565b91507f4d65726b6c6520747265652066756c6c3a2043616e6e6f7420617070656e642060008301527f616e796d6f7265000000000000000000000000000000000000000000000000006020830152604082019050919050565b6000611ffe603083612ac7565b91507f6e756c6c6966696572207772697474656e20696e20646966666572656e74207260008301527f6573696475616c2062697420662e652e000000000000000000000000000000006020830152604082019050919050565b6000612064602583612ac7565b91507f496e76616c696420726f6f743a205468697320726f6f7420646f65736e27742060008301527f65786973740000000000000000000000000000000000000000000000000000006020830152604082019050919050565b60006120ca604983612ac7565b91507f496e76616c696420687369673a2054686973206873696720646f6573206e6f7460008301527f20636f72726573706f6e6420746f207468652068617368206f6620766b20616e60208301527f6420746865206e667300000000000000000000000000000000000000000000006040830152606082019050919050565b6000612156602283612ac7565b91507f496e707574206c656e67746820646966666572732066726f6d2065787065637460008301527f65640000000000000000000000000000000000000000000000000000000000006020830152604082019050919050565b60006121bc603383612ac7565b91507f496e76616c69642070726f6f663a20556e61626c6520746f207665726966792060008301527f7468652070726f6f6620636f72726563746c79000000000000000000000000006020830152604082019050919050565b6000612222602a83612ac7565b91507f57726f6e67206d73672e76616c75653a2056616c75652070616964206973206e60008301527f6f7420636f7272656374000000000000000000000000000000000000000000006020830152604082019050919050565b6000612288601c83612ac7565b91507f496e707574206973206e6f7420696e207363616c6172206669656c64000000006000830152602082019050919050565b60006122c8603b83612ac7565b91507f496e76616c6964207369676e61747572653a20556e61626c6520746f2076657260008301527f69667920746865207369676e617475726520636f72726563746c7900000000006020830152604082019050919050565b600061232e600083612aab565b9150600082019050919050565b6000612348600083612abc565b9150600082019050919050565b6000612362603783612ac7565b91507f43616c6c20746f20626e3235364164642c20626e3235365363616c61724d756c60008301527f206f7220626e32353650616972696e67206661696c65640000000000000000006020830152604082019050919050565b60006123c8603983612ac7565b91507f43616c6c20746f2074686520626e323536416464206f7220626e32353653636160008301527f6c61724d756c20707265636f6d70696c6564206661696c6564000000000000006020830152604082019050919050565b61242a81612b40565b82525050565b61243981612b40565b82525050565b61245061244b82612b40565b612bc2565b82525050565b60006124628285611bbd565b6040820191506124728284611ce0565b6080820191508190509392505050565b600061248e8284611dca565b915081905092915050565b60006124a48261233b565b9150819050919050565b60006124ba828a61243f565b6020820191506124ca8289611e34565b91506124d68288611e34565b91506124e28287611c89565b6040820191506124f28286611ce0565b6080820191506125028285611c89565b6040820191506125128284611d37565b6101208201915081905098975050505050505050565b600060208201905061253d6000830184611b57565b92915050565b60006080820190506125586000830186611b48565b6125656020830185611b57565b6125726040830184612421565b818103606083015261258381612321565b9050949350505050565b60006060820190506125a26000830185611b48565b6125af6020830184612421565b81810360408301526125c081612321565b90509392505050565b60006020820190506125de6000830184611d9d565b92915050565b600060c0820190506125f96000830187611d9d565b6126066020830186611b66565b6126136060830185611b66565b81810360a08301526126258184611c14565b905095945050505050565b60006020820190506126456000830184611dbb565b92915050565b6000602082019050818103600083015261266481611e65565b9050919050565b6000602082019050818103600083015261268481611ea5565b9050919050565b600060208201905081810360008301526126a481611f0b565b9050919050565b600060208201905081810360008301526126c481611f4b565b9050919050565b600060208201905081810360008301526126e481611f8b565b9050919050565b6000602082019050818103600083015261270481611ff1565b9050919050565b6000602082019050818103600083015261272481612057565b9050919050565b60006020820190508181036000830152612744816120bd565b9050919050565b6000602082019050818103600083015261276481612149565b9050919050565b60006020820190508181036000830152612784816121af565b9050919050565b600060208201905081810360008301526127a481612215565b9050919050565b600060208201905081810360008301526127c48161227b565b9050919050565b600060208201905081810360008301526127e4816122bb565b9050919050565b6000602082019050818103600083015261280481612355565b9050919050565b60006020820190508181036000830152612824816123bb565b9050919050565b60006040820190506128406000830185612421565b61284d6020830184612421565b9392505050565b60006060820190506128696000830186612421565b6128766020830185612421565b6128836040830184612421565b949350505050565b6000604051905081810181811067ffffffffffffffff821117156128ae57600080fd5b8060405250919050565b600067ffffffffffffffff8211156128cf57600080fd5b602082029050919050565b600067ffffffffffffffff8211156128f157600080fd5b602082029050919050565b600067ffffffffffffffff82111561291357600080fd5b602082029050919050565b600067ffffffffffffffff82111561293557600080fd5b602082029050919050565b600067ffffffffffffffff82111561295757600080fd5b601f19601f8301169050602081019050919050565b600067ffffffffffffffff82111561298357600080fd5b601f19601f8301169050602081019050919050565b6000819050919050565b6000819050919050565b6000819050919050565b6000819050919050565b6000819050919050565b600060029050919050565b600060029050919050565b600060029050919050565b600060049050919050565b600060099050919050565b600081519050919050565b600081519050919050565b6000602082019050919050565b6000602082019050919050565b6000602082019050919050565b6000602082019050919050565b6000602082019050919050565b600081905092915050565b600081905092915050565b600081905092915050565b600081905092915050565b600081905092915050565b600081905092915050565b600082825260208201905092915050565b600082825260208201905092915050565b600081905092915050565b600082825260208201905092915050565b6000612ae382612b20565b9050919050565b6000819050919050565b60007fffffffff0000000000000000000000000000000000000000000000000000000082169050919050565b600073ffffffffffffffffffffffffffffffffffffffff82169050919050565b6000819050919050565b6000612b5582612b5c565b9050919050565b6000612b6782612b6e565b9050919050565b6000612b7982612b20565b9050919050565b82818337600083830152505050565b60005b83811015612bad578082015181840152602081019050612b92565b83811115612bbc576000848401525b50505050565b6000819050919050565b6000601f19601f8301169050919050565b612be681612ad8565b8114612bf157600080fd5b50565b612bfd81612aea565b8114612c0857600080fd5b50565b612c1481612b40565b8114612c1f57600080fd5b5056fea365627a7a7231582015c071139d561376dc726ac2a4746c70b465ba5933ab1663b55ed1c13980d2086c6578706572696d656e74616cf564736f6c63430005110040"
    # with open("./contract/mixer/abi/Groth16Mixer.abi", "r") as abistring:
    #     abistr = abistring.readlines()[0]
    #     abi = ast.literal_eval(abistr)
    # with open("./contract/mixer/abi/Groth16Mixer.bin", "r") as binstring:
    #     binstr = binstring.readlines()[0]

    client = BcosClient()
    mixerTransactionRecipient = client.sendRawTransactionGetReceipt("", abi, None, constructArgs, binstr)
    mixer_address = mixerTransactionRecipient['contractAddress']
    print(f"deploy: mixer_address={mixer_address}")
    #mixer_instance = Groth16Mixer(address)
    return mixer_address


if __name__ == '__main__':
    deploy()

